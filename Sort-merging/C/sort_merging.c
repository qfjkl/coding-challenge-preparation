#include <stdlib.h>
#include <stdio.h>

// #define RANGE range[0]
// void split()


void show(int tab[], int interval[], char const *desc){
    printf("\n");
    for(int i=interval[0]; i<=interval[1]; i++){
        printf("%s => %d ", desc, tab[i]);
    }
}
void permut(int *oldItem, int *newItem){
    int memory;
    memory = *oldItem;
    *oldItem = *newItem;
    *newItem = memory; 

}

void merging(int oldArray[], int newArray[], int min, int max){
    
    int nElement = max - min;

    for(int i=0; i<=nElement; i++){
        oldArray[min] = *(newArray+i);
        min++;
    }
    
}

void sort_merging(int array[], int range[]){
    int a = range[0];
    int b = range[1];    
    int leftRange[2] = {0};
    int rightRange[2] = {0};
    int middleArray = 0;
    int *memory = NULL;

    if((b - a)>=1){

        middleArray = ((b-a)-b%2) / 2;
        
        leftRange[0] = a;        
        leftRange[1] = a+middleArray;

        rightRange[0] = leftRange[1]+1;
        rightRange[1] = b;

        sort_merging(array, leftRange);
        sort_merging(array, rightRange);

        int T = b - a;
        // printf("\n N of elements %d [%d, %d]", T, a, b);
        
        memory = malloc(sizeof(int)*T);
        if(memory == NULL){
            exit(0);
        }
        
        int c = 0;
        for(int l=leftRange[0]; l<=leftRange[1]; l++){
            for(int r=rightRange[0]; r<=rightRange[1]; r++){
                if(array[l] > array[r]){
                    memory[c] = array[r];
                    if(rightRange[0] <= rightRange[1]){
                        rightRange[0]++;
                    }
                    c++;
                } else{
                    memory[c] = array[l];
                    if(leftRange[0] <= leftRange[1]){
                        leftRange[0]++;
                    }
                    c++;
                    break;  
                }    
            }
        }
        if(leftRange[0] <= leftRange[1]){
            for(int i=leftRange[0]; i<=leftRange[1]; i++){
                memory[c] = array[i];
                c++;
            }
        } else if(rightRange[0] <= rightRange[1]){
            for(int i=rightRange[0]; i<=rightRange[1]; i++){
                memory[c] = array[i];
                c++;
            }
        }
        merging(array, memory, a, b);
/*
        printf("\nleft => [%d, %d] right => [%d, %d]; %d | ", leftRange[0], leftRange[1], rightRange[0], rightRange[0], c);
        for(int i=a; i<=b; i++){
            printf("%d  ", memory[i-a]);
        }
*/
        return;
    } else{
        
        return;
    }

    free(memory);
}

int main(int argc, char *argv[]){
    int var[500] = {3297, 4985, 655, 4307, 700, 2748, 1976, 2893, 2233, 4961, 3050, 2558, 4997, 2050, 292, 1054, 465, 3037, 4409, 388, 3701, 436, 3488, 4227, 2703, 3636, 2479, 4635, 415, 4180, 2801, 2549, 3150, 3569, 2273, 2618, 4833, 4760, 2543, 2023, 334, 4172, 2613, 2246, 4051, 3002, 1348, 4239, 4190, 2190, 700, 2756, 2465, 4572, 904, 3323, 1278, 1999, 2032, 76, 433, 2506, 4699, 36, 2066, 2417, 4566, 384, 3541, 2445, 3033, 1844, 1591, 587, 2941, 348, 2742, 3378, 2161, 890, 1308, 2085, 1048, 2863, 2808, 4003, 3339, 4008, 2875, 1835, 2936, 4804, 836, 3331, 4472, 291, 2839, 173, 2943, 2418, 2999, 4194, 1287, 4022, 4044, 2835, 278, 1998, 3122, 1073, 4487, 4092, 4801, 2579, 317, 216, 556, 2457, 4983, 3287, 1643, 4054, 3545, 962, 2075, 2466, 2926, 2525, 1466, 3901, 2995, 623, 4103, 4509, 2580, 2174, 1121, 120, 162, 4669, 4938, 1804, 4021, 3878, 1351, 456, 4473, 4884, 3234, 3872, 4803, 4876, 4161, 4193, 1560, 937, 631, 1870, 2100, 4925, 1933, 4114, 2882, 2833, 1710, 3328, 2095, 2300, 1691, 3755, 2207, 3503, 774, 4921, 685, 4939, 1621, 1347, 3390, 2307, 1597, 3958, 490, 2547, 576, 2429, 4820, 696, 269, 4522, 1732, 3917, 2550, 3186, 1768, 1872, 929, 3855, 421, 852, 823, 2804, 4035, 953, 1692, 4684, 2650, 2382, 3178, 1255, 416, 1128, 297, 3745, 3350, 1759, 91, 3334, 260, 47, 467, 664, 2827, 438, 1359, 752, 2244, 3120, 2181, 2553, 4864, 2112, 1923, 1684, 3336, 2822, 126, 4800, 212, 2680, 4447, 1749, 4843, 3950, 3708, 2114, 3858, 3282, 1561, 1923, 3473, 24, 3584, 2833, 352, 388, 1947, 1737, 3223, 2125, 2164, 4714, 3690, 2571, 3778, 991, 1528, 3692, 2343, 4959, 291, 1350, 4111, 4023, 636, 4640, 115, 4119, 3470, 4650, 2327, 759, 3670, 4691, 3525, 3119, 1358, 1367, 4482, 480, 3388, 4085, 2204, 1745, 2322, 1043, 2765, 1203, 61, 3341, 3301, 1617, 1635, 2783, 2367, 1333, 4085, 33, 4544, 731, 1016, 2882, 4396, 1650, 845, 3209, 2402, 142, 2445, 3030, 2860, 4571, 2379, 3892, 4365, 2934, 2830, 108, 4859, 2028, 3669, 896, 2187, 252, 693, 543, 4170, 1651, 2914, 317, 1495, 877, 1134, 2125, 1192, 4631, 2592, 127, 1771, 999, 1056, 1985, 3295, 3386, 3921, 2203, 2063, 4370, 227, 1173, 1604, 608, 38, 17, 674, 2216, 3438, 609, 3921, 503, 4773, 1565, 2752, 232, 3756, 1262, 1085, 4136, 1048, 474, 1332, 2626, 3618, 4718, 2847, 2422, 1229, 1258, 2501, 759, 2332, 4661, 3180, 3556, 1092, 4662, 1288, 4813, 3345, 347, 4188, 1081, 1463, 1049, 3395, 3344, 696, 372, 4311, 353, 3540, 4948, 138, 3090, 3999, 221, 2512, 43, 1550, 4573, 909, 337, 4118, 2743, 3313, 4977, 2965, 3571, 482, 1797, 3596, 3289, 3475, 975, 4915, 4630, 3975, 1095, 1597, 1406, 3675, 3371, 4062, 1999, 2156, 2211, 3049, 2121, 1726, 2735, 1100, 564, 4752, 1443, 3268, 3936, 4202, 2085, 818, 739, 3781, 1626, 1573, 3612, 4246, 1416, 2775, 3948, 3609, 3697, 2676, 1792, 99, 3242, 2826, 2980, 837, 1382, 1484, 4825, 3174, 1817, 3973, 1191, 4137, 745, 2451, 1896, 1814, 142, 4968, 3761, 3380, 2063, 3009, 3615, 2053, 4365, 1869, 3788};
    // int var[26] = {21, 102, 25, 30, 3, 32, 500, 5, 8, 110, 16, 22, 2, 15, 1, 12, 6, 10, 66, 4, 7, 9, 0, 20, 17, 90};
    int range[2] = {0, 499};
    sort_merging(var, range);
    for(int i=0; i<=range[1]; i++){
        printf("%d ", var[i]);
    }
    return 0;
}



